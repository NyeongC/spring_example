# CHAPTER 2 스프링코어

###  IOC 컨테이너란 ?

**IoC 컨테이너**는 스프링 프레임워크의 **심장부**로, **POJO 객체**를 **생성하고 관리**하는 역할을 합니다. 스프링에서는 **의존성 주입(DI)**을 통해 객체 간의 관계를 설정하고, 객체의 생명 주기를 관리합니다.

**두 가지 종류의 IoC 컨테이너**:

1.  **`BeanFactory`**: **간단한 IoC 컨테이너**로, 레이지 로딩을 지원하지만, 기능이 제한적입니다.
    
2.  **`ApplicationContext`**: **`BeanFactory`**를 확장한 더 강력한 IoC 컨테이너로, **이벤트 처리**, **국제화**, **빈 생명 주기 관리** 등 다양한 기능을 제공합니다.
    

현재 **스프링에서는 `ApplicationContext`**를 주로 사용합니다. `ApplicationContext`는 **스프링의 표준 IoC 컨테이너**로, **빈 관리**와 **의존성 주입**을 **편리하게** 처리할 수 있습니다.

### POJO란
**POJO**(Plain Old Java Object)는 **특별한 규약 없이** 일반적인 자바 객체를 의미합니다. **프레임워크에 종속되지 않은** 순수한 자바 클래스입니다.
```java
public class Car {
    private String model;
    private String color;

    public Car(String model, String color) {
        this.model = model;
        this.color = color;
    }

    public String getModel() {
        return model;
    }

    public String getColor() {
        return color;
    }
}
```

### 빈이란?
**빈**(Bean)은 **스프링 IoC 컨테이너**가 관리하는 **객체**입니다. 스프링에서 객체를 **빈으로 등록**하면, 스프링이 그 객체의 생명 주기를 관리하고 의존성을 주입합니다.

```java
@Component  // 스프링 빈으로 등록
public class Car {
    private String model;
    private String color;

    public Car(String model, String color) {
        this.model = model;
        this.color = color;
    }

    public String getModel() {
        return model;
    }

    public String getColor() {
        return color;
    }
}
```
### 구성 클래스란?
**구성 클래스**는 **스프링 설정을 자바 코드로 작성하는 클래스**입니다. 이 클래스는 **스프링 IoC 컨테이너**에 **빈을 등록**하거나 **빈을 구성**하는 역할을 합니다. **`@Configuration`** 애너테이션을 사용하여 스프링에서 **자바 기반 설정**을 처리할 수 있습니다.

#### **주요 특징**:

-   **`@Configuration`** 애너테이션을 사용하여 스프링에 설정 클래스로 인식됩니다.
    
-   **`@Bean`** 애너테이션을 사용하여 빈을 **명시적으로 등록**합니다.
    
-   **`@ComponentScan`**을 사용하여 특정 패키지를 **스캔**하여 자동으로 빈을 등록할 수 있습니다.

```java
@Configuration  // 이 클래스는 스프링 설정 클래스
public class AppConfig {

    @Bean  // 이 메서드는 Product 객체를 빈으로 등록, 수동방식이긴 함
    public Product product() {
        return new Product("AAA", 2.5);
    }
}
```

### 컴포넌트란?
**컴포넌트**는 **스프링 IoC 컨테이너**에서 **관리되는 객체**를 의미합니다. 스프링에서는 **`@Component`** 또는 그 하위 애너테이션인 **`@Service`**, **`@Repository`**, **`@Controller`** 등을 사용하여 **클래스를 빈으로 등록**하고 **IoC 컨테이너에서 관리**합니다.

-   **`@Component`**는 **일반적인 컴포넌트** 클래스를 빈으로 등록합니다.
    
-   **`@Service`**, **`@Repository`**, **`@Controller`**는 각각 **서비스**, **데이터 접근 객체(Dao)**, **컨트롤러** 클래스를 빈으로 등록합니다.
```java
package com.example.product;

import org.springframework.stereotype.Component;

@Component  // 이 클래스는 스프링 IoC 컨테이너에서 관리되는 빈입니다.
public class Product {
    private String name;
    private double price;

    public Product(String name, double price) {
        this.name = name;
        this.price = price;
    }

    public String getName() {
        return name;
    }

    public double getPrice() {
        return price;
    }
}
```

### 컴포넌트 스캔이란?
**컴포넌트 스캔**은 **스프링 IoC 컨테이너**가 **`@Component`** 애너테이션이 붙은 클래스를 **자동으로 스캔하여 빈으로 등록**하는 기능입니다. 스프링은 **패키지 내의 모든 클래스를 스캔**하고, **빈으로 등록**할 수 있는 클래스를 찾아 등록합니다.

#### **`@ComponentScan`을 사용한 컴포넌트 스캔 활성화**

`@ComponentScan` 애너테이션을 사용하여 **스캔할 패키지**를 지정할 수 있습니다.
```java
package com.example.config;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

@Configuration  // 구성 클래스
@ComponentScan(basePackages = "com.example.product")  // 'com.example.product' 패키지 내의 모든 컴포넌트를 스캔하여 빈으로 등록
public class AppConfig {
}
```
### 스프링과 스프링부트와의 설정 차이

#### 스프링 구성
**메인 애플리케이션 클래스 (Main.java)**
```java
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class Main {
    public static void main(String[] args) {
        // 애플리케이션 컨텍스트 초기화 (구성 클래스(AppConfig)를 사용하여 설정)
        ApplicationContext context = new AnnotationConfigApplicationContext(AppConfig.class);

        // 'product' 빈을 가져오기 (자동으로 등록된 빈을 사용)
        Product product = context.getBean(Product.class);
        System.out.println("Product Name: " + product.getName());
        System.out.println("Product Price: " + product.getPrice());

        // 'carService' 빈을 가져오기 (자동으로 등록된 서비스 클래스 사용)
        CarService carService = context.getBean(CarService.class);
        carService.displayCarInfo();
    }
}
```
**애플리케이션 구성 클래스 (AppConfig.java)**
```java
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

@Configuration  // 스프링 설정 클래스
@ComponentScan(basePackages = "com.example")  // 패키지 내 모든 @Component 애너테이션이 붙은 클래스를 자동으로 스캔하여 빈으로 등록
public class AppConfig {
}
```
**컴포넌트 클래스 (Product.java)**
```java
package com.example;

import org.springframework.stereotype.Component;

@Component  // 이 클래스는 스프링 IoC 컨테이너에서 관리되는 빈
public class Product {
    private String name;
    private double price;

    // 생성자
    public Product() {
        this.name = "Default Product";
        this.price = 100.0;
    }

    // Getter
    public String getName() {
        return name;
    }

    public double getPrice() {
        return price;
    }
}

```
**서비스 클래스 (CarService.java)**
```java
package com.example;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service  // 이 클래스는 스프링 IoC 컨테이너에서 관리되는 서비스 빈
public class CarService {

    private final Product product;

    // 생성자 주입을 통해 의존성 주입
    @Autowired
    public CarService(Product product) {
        this.product = product;
    }

    // Car 정보를 출력하는 메서드
    public void displayCarInfo() {
        System.out.println("Car's associated product: " + product.getName());
        System.out.println("Car's associated price: " + product.getPrice());
    }
}

```
```java
```
```java
```
```java
```
#### 스프링부트 구성
**메인 클래스 (Main.java)**
```java
package com.example;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.ApplicationContext;

@SpringBootApplication  // 스프링 부트 애플리케이션 시작점
public class Main {
    public static void main(String[] args) {
        // 애플리케이션 컨텍스트 생성 및 실행
        ApplicationContext context = SpringApplication.run(Main.class, args);

        // 'Product' 빈을 가져오기
        Product product = context.getBean(Product.class);  // Product 빈 가져오기
        System.out.println("Product Name: " + product.getName());
        System.out.println("Product Price: " + product.getPrice());

        // 'CarService' 빈을 가져오기
        CarService carService = context.getBean(CarService.class);  // CarService 빈 가져오기
        carService.displayCarInfo();  // 서비스 메서드 실행
    }
}

```
**`Product` 클래스 (컴포넌트)**
```java
package com.example;

import org.springframework.stereotype.Component;

@Component  // 이 클래스는 스프링 IoC 컨테이너에서 관리되는 빈
public class Product {
    private String name;
    private double price;

    // 생성자
    public Product() {
        this.name = "Default Product";
        this.price = 100.0;
    }

    // Getter
    public String getName() {
        return name;
    }

    public double getPrice() {
        return price;
    }
}

```
**`CarService` 클래스 (서비스)**
```java
package com.example;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service  // 이 클래스는 스프링 IoC 컨테이너에서 관리되는 서비스 빈
public class CarService {

    private final Product product;

    // 생성자 주입을 통한 의존성 주입
    @Autowired
    public CarService(Product product) {
        this.product = product;
    }

    // Car 정보를 출력하는 메서드
    public void displayCarInfo() {
        System.out.println("Car's associated product: " + product.getName());
        System.out.println("Car's associated price: " + product.getPrice());
    }
}

```
```java
```

